<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body>
  	<nav>
	    <div class="nav-wrapper">
	    	<div class="container">
		      <a href="#" class="brand-logo">RoutineGen</a>
		      <ul id="nav-mobile" class="right hide-on-med-and-down">
		        <li><a href="#">FAQ</a></li>
		      </ul>
		    </div>
	    </div>
	  </nav>

	  <div id="index-banner" class="parallax-container" style="height: 100vh">
	    <div class="section no-pad-bot">
	      <div class="container">
	      	<br><br><br><br>
	        <div class="row center">
	          <a href="#" id="start-btn" class="btn-large waves-effect waves-light teal lighten-1">Get Started</a>
	        </div>
	      </div>
	    </div>
	  </div>

	  <div class="sec1 section teal lighten-5" style="height: 60vh">
    	<div class="container">
	      <div class="row center">
	      	<div class="col m12">
	      		<h5>Do you care more about looks or performance?</h5>
	      	</div>
	        <div class="col m6">
	            <a class="waves-effect waves-light btn" id="looks-btn">Looks</a>
	        </div>
	        <div class="col m6">
	          <a class="waves-effect waves-light btn" id="perf-btn">Performance</a>
	        </div>
	      </div>
	    </div>
	  </div>
	  <div class="sec2 section" style="height: 60vh">
	  	<div class="container">
	      <div class="row center">
	      	<div class="col m12">
	      		<h5>What attributes? Check all that apply.</h5>
	      	</div>
	        <div class="col m12" id="dyn-form">
	        	
	        </div>
	        <a class="waves-effect waves-light btn" id="form-btn">Nice!</a>
	      </div>
	    </div>
	  </div>
    <div class="sec3 section teal lighten-5" style="height: 60vh">
    	<div class="container">
	    	<div class="row center">
	    		<div class="col m12">
	      		<h5>What is your proficiency level?</h5>
	      	</div>
	    		<div class="col m4">
	    			<a class="waves-effect waves-light btn" id="beginner-btn">Beginner</a>
	    		</div>
	    		<div class="col m4">
	    			<a class="waves-effect waves-light btn" id="intermediate-btn">Intermediate</a>
	    		</div>
	    		<div class="col m4">
	    			<a class="waves-effect waves-light btn" id="advanced-btn">Advanced</a>
	    		</div>
	    	</div>
	    </div>
    </div>

    <div class="sec4 section" style="height: 60vh">
    	<div class="container">
	    	<div class="row center">
	    		<div class="col m12">
	      		<h5>Finished! Click to generate your routine.</h5>
	      	</div>
	    		<a class="waves-effect waves-light btn" id="generate-btn">Generate</a>
	    		<div id="dyn-results">
	    			
	    		</div>
	    	</div>
	    </div>
    </div>

    <footer class="page-footer">
    	
    </footer>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <script>
    	const path_map = {
    		"LooksUpper BodyBeginner": "1",
    		"LooksUpper Body,Lower BodyBeginner": "2",
    	}
    	const looks_form = `<form action="#" id="looks-form">
					    <p>
					      <input type="checkbox" id="looks-c-1" name="looks-c" />
					      <label for="looks-c-1">Upper Body</label>
					    </p>
					    <p>
					      <input type="checkbox" id="looks-c-2" name="looks-c" />
					      <label for="looks-c-2">Lower Body</label>
					    </p>
					    <p>
					      <input type="checkbox" id="looks-c-3" name="looks-c" />
					      <label for="looks-c-3">Balanced Full Body</label>
					    </p>
					  </form>`
    	const perf_form = `<form action="#" id="perf-form">
					    <p>
					      <input type="checkbox" id="perf-c-1" name="perf-c" />
					      <label for="perf-c-1">Power</label>
					    </p>
					    <p>
					      <input type="checkbox" id="perf-c-2" name="perf-c" />
					      <label for="perf-c-2">Strength</label>
					    </p>
					    <p>
					      <input type="checkbox" id="perf-c-3" name="perf-c" />
					      <label for="perf-c-3">Bodyweight</label>
					    </p>
					    <p>
					      <input type="checkbox" id="perf-c-4" name="perf-c" />
					      <label for="perf-c-4">Endurance</label>
					    </p>
					  </form>`
			var category = null;
			var attr = [];
			var proficiency = null;
    	$(document).ready(function() {

  			/* animates */
  			$("#start-btn").click(function(){
  				$('html,body').animate({
		        scrollTop: $(".sec1").offset().top},
		      'slow');
  			});
  			$("#looks-btn,#perf-btn").click(function(){
  				$('html,body').animate({
		        scrollTop: $(".sec2").offset().top},
		      'slow');
  			});
  			$("#form-btn").click(function(){
  				$('html,body').animate({
		        scrollTop: $(".sec3").offset().top},
		      'slow');
  			});
  			$("#beginner-btn,#intermediate-btn,#advanced-btn").click(function(){
  				$('html,body').animate({
		        scrollTop: $(".sec4").offset().top},
		      'slow');
  			});

  			/* individual button clicks*/
  			$("#looks-btn").click(function(){
		      $("#dyn-form").html(looks_form);
		      $("#looks-btn").addClass("disabled");
		      $("#perf-btn").removeClass("disabled");
		      category = "Looks";
		      attr = [];
  			});
  			$("#perf-btn").click(function(){
		      $("#dyn-form").html(perf_form);
		      $("#perf-btn").addClass("disabled");
		      $("#looks-btn").removeClass("disabled");
		      category = "Performance";
		      attr = [];
  			});

  			$("#beginner-btn").click(function(){
		      $("#beginner-btn").addClass("disabled");
		      $("#intermediate-btn").removeClass("disabled");
		      $("#advanced-btn").removeClass("disabled");
		      proficiency = "Beginner";
  			});
  			$("#intermediate-btn").click(function(){
		      $("#beginner-btn").removeClass("disabled");
		      $("#intermediate-btn").addClass("disabled");
		      $("#advanced-btn").removeClass("disabled");
		      proficiency = "Intermediate";
  			});
  			$("#advanced-btn").click(function(){
		      $("#beginner-btn").removeClass("disabled");
		      $("#intermediate-btn").removeClass("disabled");
		      $("#advanced-btn").addClass("disabled");
		      proficiency = "Advanced";
  			});

  			$("#generate-btn").click(function(e){
  				$(":checkbox:checked").each(function(){
  					attr.push($("label[for='"+$(this).attr('id')+"']").text());
  				});
		      if (attr.length == 0 || category == null || proficiency == null) {
		      	alert('missing a field!');
		      } else {
		      	//download
		      	const str = "" + category + attr.toString() + proficiency;
            e.preventDefault();
            if (path_map[str] == undefined) {
            	alert('your personalized routine is not out yet. Downloading default instead');
            	window.location.href = `routines/routine1.xlsx`
            } else {
            	window.location.href = `routines/routine${path_map[str]}.xlsx`
            }
		      }
		      $("#dyn-results").html(`<p>category: ${category}</p>
		      	<p>attr: ${attr.toString()}</p>
		      	<p>proficiency: ${proficiency}</p>`);
  			});

			});
    </script>
  </body>
</html>